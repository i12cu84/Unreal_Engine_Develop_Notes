```cpp
#include <iostream>
#include <string_view>
int main() {
    std::string myString = "Hello, World!";// åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²
    std::string_view myStringView(myString);// åˆ›å»ºä¸€ä¸ªstring_viewï¼ŒæŒ‡å‘myStringçš„æ•°æ®
    std::cout << "String View: " << myStringView << std::endl;// è¾“å‡ºå­—ç¬¦ä¸²è§†å›¾çš„å†…å®¹
    std::cout << "Length: " << myStringView.length() << std::endl;// è®¿é—®å­—ç¬¦ä¸²è§†å›¾çš„é•¿åº¦
    std::string_view subStringView = myStringView.substr(0, 5);// ä½¿ç”¨å­—ç¬¦ä¸²è§†å›¾çš„substræ–¹æ³•åˆ›å»ºä¸€ä¸ªå­è§†å›¾
    std::cout << "Sub String View: " << subStringView << std::endl;// è¾“å‡ºå­è§†å›¾çš„å†…å®¹
    return 0;
}
```
std::string_view æ˜¯C++17å¼•å…¥çš„ä¸€ç§å­—ç¬¦ä¸²è§†å›¾ï¼Œå®ƒå…è®¸ä½ è½»æ¾åœ°å¤„ç†å­—ç¬¦ä¸²æ•°æ®ï¼Œè€Œä¸éœ€è¦å¤åˆ¶å®ƒä»¬ã€‚

---------------------------------------------------------------------------------------------------------------------------

ä½¿ç”¨std::string_viewä¸å°†å­—ç¬¦ä¸²å¤åˆ¶åˆ°std::stringä¹‹é—´çš„ä¸»è¦åŒºåˆ«åœ¨äºå†…å­˜ç®¡ç†å’Œæ€§èƒ½:

å†…å­˜ç®¡ç†ï¼šä½¿ç”¨std::string_viewæ—¶ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªè½»é‡çº§çš„â€œè§†å›¾â€ï¼Œå®ƒä¸æ‹¥æœ‰å®é™…çš„å­—ç¬¦ä¸²æ•°æ®ï¼Œè€Œæ˜¯æŒ‡å‘ç°æœ‰å­—ç¬¦ä¸²çš„å†…å­˜åŒºåŸŸã€‚è¿™æ„å‘³ç€å®ƒä¸ä¼šä¸ºå­—ç¬¦ä¸²æ•°æ®åˆ†é…é¢å¤–çš„å†…å­˜ï¼Œä¹Ÿä¸ä¼šå¤åˆ¶å­—ç¬¦ä¸²ã€‚ä½¿ç”¨std::stringæ—¶ï¼Œå®ƒä¼šä¸ºå­—ç¬¦ä¸²åˆ†é…å†…å­˜å¹¶è¿›è¡Œå¤åˆ¶ï¼Œå› æ­¤ä¼šæœ‰ä¸¤ä»½å†…å­˜ï¼šåŸå§‹å­—ç¬¦ä¸²å’Œstd::stringä¸­çš„å¤åˆ¶ã€‚

æ€§èƒ½ï¼šä½¿ç”¨std::string_viewé€šå¸¸æ¯”å°†å­—ç¬¦ä¸²å¤åˆ¶åˆ°std::stringæ›´é«˜æ•ˆï¼Œå› ä¸ºå®ƒé¿å…äº†é¢å¤–çš„å†…å­˜åˆ†é…å’Œå¤åˆ¶æ“ä½œã€‚

ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼šä½¿ç”¨std::string_viewæ—¶ï¼Œä½ éœ€è¦ç¡®ä¿åŸå§‹å­—ç¬¦ä¸²åœ¨std::string_viewä»ç„¶åœ¨ä½¿ç”¨æ—¶ä¿æŒæœ‰æ•ˆã€‚å¦‚æœåŸå§‹å­—ç¬¦ä¸²çš„ç”Ÿå‘½å‘¨æœŸæ¯”std::string_viewæ›´çŸ­ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°æ‚¬å‚æŒ‡é’ˆçš„é—®é¢˜ã€‚ä½¿ç”¨std::stringæ—¶ï¼Œå®ƒä¼šæ‹¥æœ‰è‡ªå·±çš„å†…å­˜å‰¯æœ¬ï¼Œå› æ­¤ä¸éœ€è¦æ‹…å¿ƒåŸå§‹å­—ç¬¦ä¸²ä½•æ—¶ä¼šè¢«é‡Šæ”¾ã€‚

å› æ­¤ï¼Œå½“ä½ åªéœ€è¦è¯»å–å­—ç¬¦ä¸²æ•°æ®è€Œä¸éœ€è¦ä¿®æ”¹å®ƒæ—¶ï¼Œstd::string_viewæä¾›äº†ä¸€ç§é«˜æ•ˆçš„æ–¹å¼æ¥å¤„ç†å­—ç¬¦ä¸²ã€‚ä½†æ˜¯è¯·æ³¨æ„ï¼Œå¦‚æœä½ éœ€è¦å¯¹å­—ç¬¦ä¸²è¿›è¡Œä¿®æ”¹æˆ–è€…éœ€è¦ç¡®ä¿å­—ç¬¦ä¸²çš„ç”Ÿå‘½å‘¨æœŸï¼Œé‚£ä¹ˆä½ å¯èƒ½éœ€è¦ä½¿ç”¨std::stringæ¥æ‹¥æœ‰è‡ªå·±çš„å†…å­˜å‰¯æœ¬ã€‚

---------------------------------------------------------------------------------------------------------------------------

å¦å¤–,å…¶ä¸åˆ«å(Alias)çš„åŒºåˆ«:

å†…å­˜ç®¡ç†ï¼šåˆ«åæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåç§°åˆ«ç§°ï¼Œä¸ä¼šæ”¹å˜å†…å­˜ç®¡ç†æ–¹å¼ã€‚å¦‚æœä½ ä½¿ç”¨åˆ«åæ¥å¼•ç”¨å­—ç¬¦ä¸²ï¼Œä»ç„¶éœ€è¦è€ƒè™‘åŸå§‹å­—ç¬¦ä¸²çš„ç”Ÿå‘½å‘¨æœŸå’Œå†…å­˜ç®¡ç†ã€‚std::string_viewæ˜¯ä¸€ä¸ªåŒ…å«æœ‰å…³å­—ç¬¦ä¸²çš„å…ƒä¿¡æ¯ï¼ˆæŒ‡é’ˆå’Œé•¿åº¦ï¼‰çš„è½»é‡çº§å¯¹è±¡ï¼Œä¸æ‹¥æœ‰å†…å­˜ï¼Œå› æ­¤å¯ä»¥æ›´å®‰å…¨åœ°å¼•ç”¨ç°æœ‰å­—ç¬¦ä¸²ã€‚

å­—ç¬¦ä¸²æ‹·è´ï¼šä½¿ç”¨åˆ«åä¸ä¼šé˜»æ­¢ä½ åœ¨éœ€è¦æ—¶æ‹·è´å­—ç¬¦ä¸²æ•°æ®ã€‚å¦‚æœä½ é€šè¿‡åˆ«åå¼•ç”¨å­—ç¬¦ä¸²ï¼Œå¹¶åœ¨éœ€è¦æ—¶å¯¹å…¶è¿›è¡Œæ‹·è´ï¼Œé‚£ä¹ˆå†…å­˜å¤åˆ¶ä»ç„¶ä¼šå‘ç”Ÿã€‚std::string_viewä¸å…è®¸ç›´æ¥æ‹·è´å­—ç¬¦ä¸²æ•°æ®ï¼Œå®ƒåªæä¾›äº†å¯¹åŸå§‹æ•°æ®çš„å¼•ç”¨ï¼Œå› æ­¤å¯ä»¥é¿å…ä¸å¿…è¦çš„å¤åˆ¶ã€‚

æ€§èƒ½ï¼šstd::string_viewé€šå¸¸æ¯”ä½¿ç”¨åˆ«åæ›´é«˜æ•ˆï¼Œå› ä¸ºå®ƒä¸éœ€è¦é¢å¤–çš„å†…å­˜åˆ†é…å’Œæ‹·è´æ“ä½œã€‚

å¯ç§»æ¤æ€§ï¼šstd::string_viewæ˜¯C++æ ‡å‡†åº“çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤å…·æœ‰è·¨ä¸åŒç¼–è¯‘å™¨å’Œå¹³å°çš„è‰¯å¥½å¯ç§»æ¤æ€§ã€‚åˆ«åå¯èƒ½ä¼šå—é™äºç‰¹å®šç¼–è¯‘å™¨æˆ–ç¼–è¯‘é€‰é¡¹ã€‚

æ€»çš„æ¥è¯´ï¼Œstd::string_viewæä¾›äº†æ›´å®‰å…¨ã€æ›´é«˜æ•ˆã€æ›´å¯ç§»æ¤çš„æ–¹å¼æ¥å¤„ç†å­—ç¬¦ä¸²ï¼Œç‰¹åˆ«æ˜¯å½“ä½ éœ€è¦è¯»å–å­—ç¬¦ä¸²è€Œä¸éœ€è¦ä¿®æ”¹å®ƒæ—¶ã€‚ä½¿ç”¨åˆ«åå¯èƒ½ä¼šæ›´çµæ´»ï¼Œä½†éœ€è¦æ›´å¤šçš„æ³¨æ„åŠ›æ¥ç®¡ç†å†…å­˜å’Œå¤åˆ¶æ“ä½œã€‚å› æ­¤ï¼Œæ ¹æ®å…·ä½“çš„éœ€æ±‚å’Œæ€§èƒ½è¦æ±‚ï¼Œä½ å¯ä»¥é€‰æ‹©ä½¿ç”¨é€‚å½“çš„å·¥å…·ã€‚

---------------------------------------------------------------------------------------------------------------------------
```cpp
#include <iostream>
#include <string_view>
int main() {
    std::string originalString = "Hello, World!";
    std::string_view stringView(originalString);
    std::cout << "Original View: " << originalString << std::endl;
    std::cout << "String View: " << stringView << std::endl;

    originalString += " This is a new part.";
    std::cout << "Original View: " << originalString << std::endl;
    std::cout << "String View: " << stringView << std::endl;
    return 0;
}
```
```
Original View: Hello, World!
String View: Hello, World!
Original View: Hello, World! This is a new part.
String View: !//ä½ çœ‹è¿™é‡Œå‡ºäº†é—®é¢˜å‘¢,çœ‹çœ‹ â†“ çš„æ³¨æ„
```
ç‰¹åˆ«æ³¨æ„:ä¿®æ”¹std::stringå¯èƒ½ä¼šå¯¼è‡´åŠ¨æ€å†…å­˜é‡æ–°åˆ†é…å’Œå¤åˆ¶ï¼Œè¿™æ ·åŸå§‹å­—ç¬¦ä¸²çš„å†…å­˜åœ°å€å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä½†std::string_viewä»ç„¶ä¼šå¼•ç”¨å…ˆå‰çš„å†…å­˜ä½ç½®ï¼Œå› æ­¤åœ¨ä¿®æ”¹std::stringåï¼Œè¦å°å¿ƒç¡®ä¿std::string_viewçš„å¼•ç”¨ä¸ä¼šå¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸ºã€‚å¦‚æœä½ ä½¿å¾—std::stringçš„å†…å­˜é‡æ–°åˆ†é…å’Œå¤åˆ¶ï¼Œä¸ä¹‹å‰ç›¸å…³çš„std::string_viewä¼šå˜å¾—æ— æ•ˆï¼ˆæ‚¬æŒ‚æŒ‡é’ˆï¼‰ã€‚è¿™æ˜¯å› ä¸ºstd::string_viewä»…ä»…æ˜¯ä¸€ä¸ªå¯¹std::stringå†…å­˜çš„è§†å›¾ï¼Œå®ƒä¸ä¼šè·Ÿè¸ªstd::stringå†…éƒ¨çš„å†…å­˜ç®¡ç†æˆ–å¤åˆ¶æ“ä½œã€‚


---------------------------------------------------------------------------------------------------------------------------

 ä¸€ã€æ ¸å¿ƒç‰¹ç‚¹

éæ‹¥æœ‰å†…å­˜ï¼ˆåªè¯»è§†å›¾ï¼‰

ä»…å­˜å‚¨æŒ‡å‘åŸå§‹å­—ç¬¦ä¸²çš„æŒ‡é’ˆå’Œé•¿åº¦ï¼Œä¸ç®¡ç†å†…å­˜ç”Ÿå‘½å‘¨æœŸï¼Œä¸åˆ†é…æˆ–é‡Šæ”¾å†…å­˜ã€‚

åªè¯»æ“ä½œï¼šæ— æ³•é€šè¿‡ string_view ä¿®æ”¹åº•å±‚å­—ç¬¦ä¸²æ•°æ®ã€‚

è½»é‡é«˜æ•ˆ

æ„é€ ã€å¤åˆ¶å¼€é”€æå°ï¼ˆä»…å¤åˆ¶æŒ‡é’ˆå’Œé•¿åº¦ï¼‰ï¼Œé€‚åˆé«˜é¢‘è°ƒç”¨åœºæ™¯ã€‚

é¿å…ä¸´æ—¶ std::string çš„æ„é€ ï¼Œå°¤å…¶å¤„ç†å­—é¢é‡æˆ–å¤§å­—ç¬¦ä¸²æ—¶æ€§èƒ½æ˜¾è‘—æå‡ã€‚

å…¼å®¹å¤šç§å­—ç¬¦ä¸²ç±»å‹

å¯æ¥å— std::stringã€C é£æ ¼å­—ç¬¦ä¸²ï¼ˆconst char*ï¼‰ã€å­—ç¬¦æ•°ç»„åŠå­—é¢é‡ä½œä¸ºæ•°æ®æºã€‚

æ“ä½œä¸ std::string ç±»ä¼¼

æ”¯æŒ size()ã€substr()ã€find()ã€compare() ç­‰å¸¸è§æ“ä½œï¼Œä½† substr() å¤æ‚åº¦ä¸º O(1)ï¼ˆä»…è°ƒæ•´æŒ‡é’ˆå’Œé•¿åº¦ï¼Œæ— æ‹·è´ï¼‰ã€‚

æ— ç©ºç»ˆæ­¢ç¬¦ä¿è¯

ä¸ä»¥ \0 ç»“å°¾ï¼Œéœ€é€šè¿‡ size() ç¡®å®šè¾¹ç•Œï¼Œç›´æ¥ä½¿ç”¨ data() å¯èƒ½è¶Šç•Œã€‚

ğŸ›  äºŒã€åŸºæœ¬ç”¨æ³•

1. æ„é€ ä¸åˆå§‹åŒ–
   
```cpp
#include <string_view>
#include <string>

std::string str = "Hello, C++17";
const char* cstr = "C-style string";

// ä» std::string æ„é€ 
std::string_view sv1(str); 

// ä» C å­—ç¬¦ä¸²æ„é€ 
std::string_view sv2(cstr); 

// ä»å­—é¢é‡ç›´æ¥æ„é€ 
std::string_view sv3("Literal"); 

// æŒ‡å®šæŒ‡é’ˆå’Œé•¿åº¦
char arr[] = {'A', 'B', 'C'};
std::string_view sv4(arr, 3); 
```

2. å¸¸ç”¨æ“ä½œ
```cpp
std::string_view sv = "Hello, World";

// è·å–é•¿åº¦
size_t len = sv.size(); // 12

// è·å–å­ä¸²ï¼ˆO(1) æ“ä½œï¼‰
std::string_view sub = sv.substr(0, 5); // "Hello"

// æŸ¥æ‰¾å­—ç¬¦
size_t pos = sv.find('W'); // 7

// ç§»é™¤å‰ç¼€/åç¼€
sv.remove_prefix(7);    // "World"
sv.remove_suffix(1);    // "Worl"

// éå†å­—ç¬¦
for (char c : sv) { /* ... */ }
```
3. ä½œä¸ºå‡½æ•°å‚æ•°ï¼ˆé«˜æ•ˆä¼ é€’ï¼‰
```cpp
// æ¨èï¼šé¿å…æ‹·è´ï¼Œå…¼å®¹å¤šç§å­—ç¬¦ä¸²ç±»å‹
void process_text(std::string_view text) {
    if (text.empty()) return;
    auto substr = text.substr(0, 10); // æ— æ‹·è´æ“ä½œ
}

// è°ƒç”¨ç¤ºä¾‹
process_text("Literal");       // å­—é¢é‡
process_text(std::string("...")); // std::string
process_text(cstr);            // C å­—ç¬¦ä¸²
```
âš¡ ä¸‰ã€æ€§èƒ½ä¼˜åŠ¿åœºæ™¯
é¿å…ä¸´æ—¶å­—ç¬¦ä¸²æ‹·è´

ä¼ é€’å­—é¢é‡æ—¶ï¼Œconst std::string& ä¼šè§¦å‘ä¸´æ—¶ std::string æ„é€ ï¼ˆå¯èƒ½å †åˆ†é…ï¼‰ï¼Œè€Œ string_view æ— æ­¤å¼€é”€68ã€‚

é«˜æ•ˆå­ä¸²æ“ä½œ

sv.substr() ä»…è¿”å›æ–°è§†å›¾ï¼Œè€Œ str.substr() éœ€å¤åˆ¶æ•°æ®8ã€‚

```cpp
// å¯¹æ¯”æ€§èƒ½ï¼ˆ10ä¸‡æ¬¡è°ƒç”¨ï¼‰
std::string s = "long_string......";
// string::substrï¼šè€—æ—¶ 17ms (æ¶‰åŠæ‹·è´)
// string_view::substrï¼šè€—æ—¶ 1.6ms (ä»…æŒ‡é’ˆæ“ä½œ):cite[8]
```
è§£æå¤§æ–‡æœ¬/æ—¥å¿—

å¤„ç†å†…å­˜æ˜ å°„æ–‡ä»¶æˆ–ç½‘ç»œæ•°æ®æ—¶ï¼Œæ— éœ€å¤åˆ¶åŸå§‹æ•°æ®46ã€‚

âš ï¸ å››ã€æ³¨æ„äº‹é¡¹
ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ˆå…³é”®ï¼ï¼‰

åŸå§‹å­—ç¬¦ä¸²å¿…é¡»æ¯” string_view å­˜æ´»æ›´ä¹…ï¼Œå¦åˆ™å¯¼è‡´æ‚¬å‚æŒ‡é’ˆï¼š

```cpp
std::string_view sv;
{
    std::string temp = "temporary";
    sv = temp;      // sv æŒ‡å‘ temp çš„å†…å­˜
} // temp ææ„ï¼Œsv å¤±æ•ˆï¼
std::cout << sv;    // æœªå®šä¹‰è¡Œä¸ºï¼:cite[5]:cite[6]
```
ä¸æ”¯æŒä¿®æ”¹åº•å±‚æ•°æ®

è‹¥éœ€ä¿®æ”¹å­—ç¬¦ä¸²ï¼Œéœ€è½¬ä¸º std::stringï¼š

```cpp
std::string str2 = std::string(sv); // å¤åˆ¶æ•°æ®
str2[0] = 'X'; // å…è®¸ä¿®æ”¹
```
ä¸ä¿è¯ç©ºç»ˆæ­¢ç¬¦

éœ€ç”¨ size() æ§åˆ¶è¾¹ç•Œï¼Œé¿å…ç›´æ¥ä¼ é€’ data() ç»™ C å‡½æ•°69ã€‚
